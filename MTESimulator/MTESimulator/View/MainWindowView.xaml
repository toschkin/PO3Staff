<Window x:Class="MTESimulator.MainWindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:wpf="clr-namespace:Rubenhak.Common.WPF;assembly=Rubenhak.Common.WPF"
        xmlns:local="clr-namespace:MTESimulator"        
        xmlns:qc="clr-namespace:QuickConverter;assembly=QuickConverter"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        mc:Ignorable="d"
        Title="Симулятор МТЕ 14хх" Height="600" Width="800"
        Closing="MainWindowView_OnClosing"
        MinHeight="480"
        MinWidth="640"
        Background="#FFECEAEA">
    <DockPanel x:Name="WindowMainDockPannel" UseLayoutRounding="True">
        <DockPanel.Background>
            <ImageBrush ImageSource="../Images/energo.png" Opacity="0.05"></ImageBrush>
        </DockPanel.Background>
        <ToolBar DockPanel.Dock="Top" Background="Transparent">
            <Button ToolTip="Подключиться..."                     
                    Command="{Binding Path=ConnectCommand}">
                <Image Source="../Images/connect.png" MaxHeight="32" MaxWidth="32" 
                       Style="{DynamicResource GrayedIfDisabledImage}">
                    <Image.Effect>
                        <DropShadowEffect Color="Gray" Opacity="0.2"/>
                    </Image.Effect>
                </Image>
            </Button>
            <Button ToolTip="Отключиться"                     
                    Command="{Binding Path=DisconnectCommand}">
                <Image Source="../Images/disconnect.png" MaxHeight="32" MaxWidth="32" 
                       Style="{DynamicResource GrayedIfDisabledImage}">
                    <Image.Effect>
                        <DropShadowEffect Color="Gray" Opacity="0.2"/>
                    </Image.Effect>
                </Image>
            </Button>
            <Button ToolTip="Импорт тестовой конфигурации из файла..."                                         
                    Command="{Binding Path=ImportCommand}">
                <Image Source="../Images/file-import-icon.png" MaxHeight="32" MaxWidth="32">
                    <Image.Effect>
                        <DropShadowEffect Color="Gray" Opacity="0.2"/>
                    </Image.Effect>
                </Image>
            </Button>
            <Button ToolTip="Экспорт тестовой конфигурации в файл..."                                         
                    Command="{Binding Path=ExportCommand}">
                <Image Source="../Images/file-export-icon.png" MaxHeight="32" MaxWidth="32">
                    <Image.Effect>
                        <DropShadowEffect Color="Gray" Opacity="0.2"/>
                    </Image.Effect>
                </Image>
            </Button>
            <Button ToolTip="Значения по умолчанию(номинальные)..."                                         
                    Command="{Binding Path=DafaultCommand}">
                <Image Source="../Images/document_empty.png" MaxHeight="32" MaxWidth="32">
                    <Image.Effect>
                        <DropShadowEffect Color="Gray" Opacity="0.2"/>
                    </Image.Effect>
                </Image>
            </Button>
        </ToolBar>
        <Border DockPanel.Dock ="Bottom" BorderBrush="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}" 
                BorderThickness="1">
            <StatusBar DockPanel.Dock ="Bottom" Background="Transparent">
                <StatusBar.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                    </ItemsPanelTemplate>
                </StatusBar.ItemsPanel>
                <StatusBarItem Grid.Column="0">
                    <TextBlock Text="{Binding Path=СonnectionStatus}"/>
                </StatusBarItem>
                <Separator Grid.Column="1" Margin="1,0,1,0"/>
                <StatusBarItem Grid.Column="2">
                    <TextBlock Text="{Binding Path=OperationStatus}"/>
                </StatusBarItem>
            </StatusBar>
        </Border>
        <DockPanel UseLayoutRounding="True">
            <StackPanel>
                <CheckBox x:Name="ExtendedMode" Content="Расширенный режим" HorizontalAlignment="Right"></CheckBox>
                <TabControl DataContext="{Binding Path=MTEDeviceModbusMemoryMapViewModel}" Background="Transparent">
                    <TabItem Header="Информация о конфигурации" FontSize="14">
                        <StackPanel Margin="10">
                            <GroupBox Header="Общая информация">
                                <WrapPanel Orientation="Horizontal">
                                    <TextBlock Text="Серийный номер:"
                                               Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                               P={Binding Path=IsChecked, ElementName=ExtendedMode}}"
                                               TextAlignment="Right"  Margin="10,10,0,10"
                                               VerticalAlignment="Center"></TextBlock>
                                    <TextBox  Margin="10,10,0,10" TextAlignment="Center"
                                              Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                              P={Binding Path=IsChecked, ElementName=ExtendedMode}}"
                                            wpf:TextBoxMaskBehavior.Mask="Integer"
                                            wpf:TextBoxMaskBehavior.MaximumValue="65535"
                                            wpf:TextBoxMaskBehavior.MinimumValue="0"
                                            Text="{Binding Path=SerialNumber, UpdateSourceTrigger=PropertyChanged}"                                     
                                            Width="60"></TextBox>
                                    <TextBlock  Text="Серия:"
                                                TextAlignment="Right"  Margin="10,10,0,10"
                                                Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                                P={Binding Path=IsChecked, ElementName=ExtendedMode}}"
                                                VerticalAlignment="Center"></TextBlock>
                                    <TextBox  Margin="10,10,0,10" TextAlignment="Center"
                                               Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                               P={Binding Path=IsChecked, ElementName=ExtendedMode}}"
                                                wpf:TextBoxMaskBehavior.Mask="Integer"
                                                wpf:TextBoxMaskBehavior.MaximumValue="15"
                                                wpf:TextBoxMaskBehavior.MinimumValue="0"
                                                Text="{Binding Path=Serie, UpdateSourceTrigger=PropertyChanged}"                                     
                                                Width="60"></TextBox>
                                    <TextBlock Text="Конфигурация измерительной цепи:"
                                       TextAlignment="Right"  Margin="10,10,0,10"
                                       VerticalAlignment="Center"></TextBlock>
                                    <ComboBox x:Name="MeasurementCircuitTypeComboBox" Margin="10,10,0,10"
                                      SelectedItem="{Binding Path=MeasurementCircuitType, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                      ItemsSource="{Binding Path=AvailableMeasurementCircuitTypes}"
                                      Width="170">
                                    </ComboBox>
                                </WrapPanel>
                            </GroupBox>
                            <WrapPanel>
                                <GroupBox Header="Измерительный трансформатор тока" >
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition></RowDefinition>
                                            <RowDefinition></RowDefinition>
                                            <RowDefinition></RowDefinition>
                                        </Grid.RowDefinitions>
                                        <TextBlock Text="Ток первичной обмотки (А):" Grid.Row="0" Grid.Column="0"
                                                   TextAlignment="Right"  Margin="10,10,0,10"
                                                   VerticalAlignment="Center"></TextBlock>
                                        <TextBox  Margin="10,10,10,10" TextAlignment="Center" Grid.Row="0" Grid.Column="1"
                                                 wpf:TextBoxMaskBehavior.Mask="Integer"
                                                 wpf:TextBoxMaskBehavior.MaximumValue="40000"
                                                 wpf:TextBoxMaskBehavior.MinimumValue="1"
                                                 Text="{Binding Path=PrimaryCurrent, UpdateSourceTrigger=PropertyChanged}"                                     
                                                 Width="90"></TextBox>

                                        <TextBlock Text="Ток вторичной обмотки (А):" Grid.Row="1" Grid.Column="0"
                                                   TextAlignment="Right"  Margin="10,10,0,10"
                                                   VerticalAlignment="Center"></TextBlock>
                                        <TextBox  Margin="10,10,10,10" TextAlignment="Center" Grid.Row="1" Grid.Column="1"
                                                 wpf:TextBoxMaskBehavior.Mask="Integer"
                                                 wpf:TextBoxMaskBehavior.MaximumValue="5"
                                                 wpf:TextBoxMaskBehavior.MinimumValue="1"
                                                 Text="{Binding Path=SecondaryCurrent, UpdateSourceTrigger=PropertyChanged}"                                     
                                                 Width="90"></TextBox>

                                        <TextBlock Text="Коэффициент трансформации:" Grid.Row="2" Grid.Column="0"
                                                   TextAlignment="Right"  Margin="10,10,0,10"
                                                   VerticalAlignment="Center"></TextBlock>
                                        <TextBox  Margin="10,10,10,10" TextAlignment="Center" Grid.Row="2" Grid.Column="1"                                                 
                                                  IsEnabled="False"
                                                  Text="{Binding Path=Coef_CT, UpdateSourceTrigger=PropertyChanged}"                                     
                                                  Width="90"></TextBox>
                                    </Grid>
                                </GroupBox>
                                <GroupBox Header="Измерительный трансформатор напряжения" Margin="10,0">
                                    <WrapPanel>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition></ColumnDefinition>
                                                <ColumnDefinition></ColumnDefinition>
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition></RowDefinition>
                                                <RowDefinition></RowDefinition>
                                                <RowDefinition></RowDefinition>
                                            </Grid.RowDefinitions>
                                            <TextBlock Text="Напряжение первичной обмотки (В):" Grid.Row="0" Grid.Column="0"
                                                   TextAlignment="Right"  Margin="10,10,0,10"
                                                   VerticalAlignment="Center"></TextBlock>
                                            <TextBox  Margin="10,10,10,10" TextAlignment="Center" Grid.Row="0" Grid.Column="1"
                                                 wpf:TextBoxMaskBehavior.Mask="Integer"
                                                 wpf:TextBoxMaskBehavior.MaximumValue="1500000"
                                                 wpf:TextBoxMaskBehavior.MinimumValue="380"
                                                 Text="{Binding Path=PrimaryVoltage, UpdateSourceTrigger=PropertyChanged}"                                     
                                                 Width="90"></TextBox>

                                            <TextBlock Text="Напряжение вторичной обмотки (В):" Grid.Row="1" Grid.Column="0"
                                                   TextAlignment="Right"  Margin="10,10,0,10"
                                                   VerticalAlignment="Center"></TextBlock>
                                            <TextBox  Margin="10,10,10,10" TextAlignment="Center" Grid.Row="1" Grid.Column="1"
                                                 wpf:TextBoxMaskBehavior.Mask="Integer"
                                                 wpf:TextBoxMaskBehavior.MaximumValue="100"
                                                 wpf:TextBoxMaskBehavior.MinimumValue="1"
                                                 Text="{Binding Path=SecondaryVoltage, UpdateSourceTrigger=PropertyChanged}"                                     
                                                 Width="90"></TextBox>

                                            <TextBlock Text="Коэффициент трансформации:" Grid.Row="2" Grid.Column="0"
                                                   TextAlignment="Right"  Margin="10,10,0,10"
                                                   VerticalAlignment="Center"></TextBlock>
                                            <TextBox  Margin="10,10,10,10" TextAlignment="Center" Grid.Row="2" Grid.Column="1"                                                 
                                                  IsEnabled="False"
                                                  Text="{Binding Path=Coef_VT, UpdateSourceTrigger=PropertyChanged}"                                     
                                                  Width="90"></TextBox>
                                        </Grid>
                                    </WrapPanel>
                                </GroupBox>
                            </WrapPanel>
                            <GroupBox Header="Выходные модули"
                                      Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                      P={Binding Path=IsChecked, ElementName=ExtendedMode}}">
                                <StackPanel>
                                    <WrapPanel Orientation="Horizontal">
                                        <TextBlock Text="Модуль № 1:"
                                       TextAlignment="Right" Margin="10,10,0,10"
                                       VerticalAlignment="Center"></TextBlock>
                                        <ComboBox Margin="10,10,0,10"                                     
                                      SelectedItem="{Binding Path=OutputModule1Type, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                      ItemsSource="{Binding Path=AvailableOutputModuleTypes}"
                                      Width="190">
                                        </ComboBox>
                                        <TextBlock Text="Модуль № 2:"
                                       TextAlignment="Right" Margin="10,10,0,10"
                                       VerticalAlignment="Center"></TextBlock>
                                        <ComboBox Margin="10,10,0,10"                                   
                                      SelectedItem="{Binding Path=OutputModule2Type, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                      ItemsSource="{Binding Path=AvailableOutputModuleTypes}"
                                      Width="190">
                                        </ComboBox>
                                    </WrapPanel>
                                    <WrapPanel Orientation="Horizontal">
                                        <TextBlock Text="Модуль № 3:"
                                       TextAlignment="Right" Margin="10,10,0,10"
                                       VerticalAlignment="Center"></TextBlock>
                                        <ComboBox Margin="10,10,0,10"
                                      SelectedItem="{Binding Path=OutputModule3Type, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                      ItemsSource="{Binding Path=AvailableOutputModuleTypes}"
                                      Width="190">
                                        </ComboBox>
                                        <TextBlock Text="Тип токового интерфейса:"
                                       TextAlignment="Right" Margin="10,10,0,10"
                                       VerticalAlignment="Center"></TextBlock>
                                        <ComboBox Margin="10,10,0,10"
                                      SelectedItem="{Binding Path=CurrentInterfaceType, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                      ItemsSource="{Binding Path=AvailableCurrentInterfaceTypes}"
                                      Width="155">
                                        </ComboBox>
                                    </WrapPanel>
                                </StackPanel>
                            </GroupBox>
                            <GroupBox Header="Температура устройства"
                                      Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                      P={Binding Path=IsChecked, ElementName=ExtendedMode}}">
                                <StackPanel>
                                    <Slider x:Name="TemperatureSlider"  Margin="10" 
                                    Interval="1" Maximum="127" Minimum="-128"
                                    Foreground="Green"                                    
                                    IsSelectionRangeEnabled="True"
                                    SelectionStart="-40" SelectionEnd="60"
                                    AutoToolTipPlacement="BottomRight"
                                    TickPlacement="BottomRight"
                                    TickFrequency="5"
                                    Value="{Binding Path=Temperature}"></Slider>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="1*"></ColumnDefinition>
                                            <ColumnDefinition Width="1*"></ColumnDefinition>
                                            <ColumnDefinition Width="1*"></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Grid.Row="0" 
                                               Text="{Binding ElementName=TemperatureSlider, Path=Minimum}"
                                               TextAlignment="Left" ></TextBlock>
                                        <TextBlock Grid.Column="1" Grid.Row="0" 
                                               Text="{Binding ElementName=TemperatureSlider, Path=Value}"
                                               TextAlignment="Center" ></TextBlock>
                                        <TextBlock Grid.Column="2" Grid.Row="0" 
                                               Text="{Binding ElementName=TemperatureSlider, Path=Maximum}"
                                               TextAlignment="Right" ></TextBlock>
                                    </Grid>
                                </StackPanel>
                            </GroupBox>
                        </StackPanel>
                    </TabItem>
                    <TabItem Header="Измерения" FontSize="14">
                        <StackPanel Margin="10">
                            <GroupBox Header="Токи">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <WrapPanel Margin="10,10,10,0" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right">
                                        <TextBlock Text="I"
                                       TextAlignment="Right"  Margin="10,0,0,0"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="A" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (А):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" 
                                                       Value="{Binding Path=Ia, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=CurrentQuantWeight}"   
                                                       Maximum="{Binding Path=Imax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Ia_quants, UpdateSourceTrigger=PropertyChanged}">
                                    </xctk:DoubleUpDown>
                                    <!--                                                                                      
                                              
                                                                            
                                    
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Left"                                  
                                      Text="{Binding Path=Ia, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                      MaxLength="8"
                                      Width="60"></TextBox>
                                    -->
                                    <WrapPanel Margin="10,10,10,0" Grid.Column="2" Grid.Row="0" HorizontalAlignment="Right"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="I"
                                       TextAlignment="Right"  Margin="10,0,0,0"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (А):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"                              
                                                       FormatString="F3" Text="{Binding Path=Ib, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=CurrentQuantWeight}"  
                                                       Maximum="{Binding Path=Imax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Ib_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center"  Grid.Column="3" Grid.Row="0" 
                                          HorizontalAlignment="Left" Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"                              
                                          Text="{Binding Path=Ib, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="8"
                                          Width="60"></TextBox>
                                    -->
                                    <WrapPanel Margin="10,10,10,0" Grid.Column="4" Grid.Row="0" HorizontalAlignment="Right">
                                        <TextBlock Text="I"
                                       TextAlignment="Right"  Margin="10,0,0,0"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="C" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (А):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Ic, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=CurrentQuantWeight}"
                                                       Maximum="{Binding Path=Imax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Ic_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="5" Grid.Row="0" HorizontalAlignment="Left"                                  
                                      Text="{Binding Path=Ic, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                      MaxLength="8"
                                      Width="60"></TextBox>
                                    -->
                                    <WrapPanel Margin="10,10,10,0" Grid.Column="6" Grid.Row="0" HorizontalAlignment="Right"
                                               Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                               P={Binding Path=IsChecked, ElementName=ExtendedMode}}">
                                        <TextBlock Text="I"
                                       TextAlignment="Right"  Margin="10,0,0,0"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="N" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (А):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <xctk:DoubleUpDown Grid.Column="7" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=In, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=CurrentQuantWeight}"
                                                       Maximum="{Binding Path=Imax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=In_quants, UpdateSourceTrigger=PropertyChanged}"
                                                       Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=IsChecked, ElementName=ExtendedMode}}"/>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="7" Grid.Row="0" HorizontalAlignment="Left"                                  
                                      Text="{Binding Path=In, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                      MaxLength="8"
                                      Width="60"></TextBox>
                                    -->
                                </Grid>
                            </GroupBox>
                            <GroupBox Header="Напряжения">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <WrapPanel Margin="0,10,10,0" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Right">
                                        <TextBlock Text="U"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="A" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8" Visibility="{qc:Binding '$P>0?Visibility.Collapsed:Visibility.Visible', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}" 
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (кВ):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Left"
                                      Text="{Binding Path=Ua, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                      MaxLength="6"
                                      Width="80"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Ua, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=VoltageQuantWeight}"
                                                       Maximum="{Binding Path=Umax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Ua_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" Grid.Column="2" Grid.Row="0" HorizontalAlignment="Right">
                                        <TextBlock Text="U"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8" Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="AC" FontSize="8" Visibility="{qc:Binding '$P>0?Visibility.Collapsed:Visibility.Visible', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}" 
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (кВ):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="3" Grid.Row="0" HorizontalAlignment="Left"
                                      Text="{Binding Path=Ub, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                      MaxLength="6"
                                      Width="80"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Ub, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=VoltageQuantWeight}"
                                                       Maximum="{Binding Path=Umax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Ub_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" Grid.Column="4" Grid.Row="0" HorizontalAlignment="Right">
                                        <TextBlock Text="U"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8" Visibility="{qc:Binding '$P>0?Visibility.Collapsed:Visibility.Visible', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}" 
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="C" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (кВ):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Uc, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=VoltageQuantWeight}"
                                                       Maximum="{Binding Path=Umax, UpdateSourceTrigger=PropertyChanged}" Minimum="0.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Uc_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="5" Grid.Row="0" HorizontalAlignment="Left"                                  
                                      Text="{Binding Path=Uc, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                      MaxLength="6"
                                      Width="80"></TextBox>
                                    -->

                                    <WrapPanel Margin="0,10,10,0" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Right"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="U"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="AB" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (кВ):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Stretch"
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Uab, StringFormat={}{0:0.000}}"    
                                          MaxLength="9" IsEnabled="False"></TextBox>

                                    <WrapPanel Margin="0,10,10,0" Grid.Column="2" Grid.Row="1" HorizontalAlignment="Right"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="U"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="AC" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (кВ):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="3" Grid.Row="1" HorizontalAlignment="Stretch"
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Uac, StringFormat={}{0:0.000}}"  
                                          MaxLength="9" IsEnabled="False"></TextBox>

                                    <WrapPanel Margin="0,10,10,0" Grid.Column="4" Grid.Row="1" HorizontalAlignment="Right"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="U"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="BC" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (кВ):"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="5" Grid.Row="1" HorizontalAlignment="Stretch"
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Ubc,StringFormat={}{0:0.000}}"  
                                          MaxLength="9" IsEnabled="False"></TextBox>
                                </Grid>
                            </GroupBox>
                            <GroupBox Header="Mощности">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="2*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="2*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="2*"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>

                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="0"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="P"
                                            TextAlignment="Right" 
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="A" FontSize="8"                                     
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (Вт):"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="0"
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Pa, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Pa, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Pa_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="0"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="P"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (Вт):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="3" Grid.Row="0" 
                                          HorizontalAlignment="Left"                                 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Pb, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Pb, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Pb_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="4" Grid.Row="0"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="P"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="C" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (Вт):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="5" Grid.Row="0" HorizontalAlignment="Left"                                 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Pc, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Pc, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Pc_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="1"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="Q"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="A" FontSize="8"                                     
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (вар):"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="1" 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Qa, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="1"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Qa, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Qa_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="1"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="Q"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (вар):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="3" Grid.Row="1" HorizontalAlignment="Left"                                 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Qb, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="1"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Qb, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Qb_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="4" Grid.Row="1"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="Q"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="C" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (вар):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="5" Grid.Row="1" HorizontalAlignment="Left"                                 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Qc, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="1"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Qc, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Qc_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="2"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="S"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="A" FontSize="8"                                     
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (ВА):"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="2"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Sa, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Sa_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="2"
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Sa, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="2"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="S"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (ВА):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="3" Grid.Row="2" HorizontalAlignment="Left"                                 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Sb, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="2"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Sb, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Sb_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="4" Grid.Row="2"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="S"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="C" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (ВА):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="5" Grid.Row="2" HorizontalAlignment="Left"                                 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          Text="{Binding Path=Sc, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="2"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Sc, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Sc_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="3">
                                        <TextBlock Text="P"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="SYS" FontSize="8"                                     
                                            VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (Вт):"
                                            TextAlignment="Right"
                                            VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="3"
                                          Text="{Binding Path=Psys, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="3"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Psys, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"                                                      
                                                       ToolTip="{Binding Path=Psys_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="3">
                                        <TextBlock Text="Q"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="SYS" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (вар):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="3" Grid.Row="3" HorizontalAlignment="Left"                                 
                                          Text="{Binding Path=Qsys, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="3"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Qsys, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"                                                      
                                                       ToolTip="{Binding Path=Qsys_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="4" Grid.Row="3">
                                        <TextBlock Text="S"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="SYS" FontSize="8"                                     
                                           VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" (ВА):"
                                           TextAlignment="Right"
                                           VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="10,10,0,0" TextAlignment="Center"   Grid.Column="5" Grid.Row="3" HorizontalAlignment="Left"                                 
                                          Text="{Binding Path=Ssys, UpdateSourceTrigger=PropertyChanged,StringFormat={}{0:0.00}}"  
                                          MaxLength="14"
                                          Width="150"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="3"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F3" Text="{Binding Path=Ssys, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.000}}" 
                                                       Increment="{Binding Path=PowerQuantWeight}"  
                                                       Maximum="{Binding Path=PowerMaxValue, UpdateSourceTrigger=PropertyChanged}" 
                                                       Minimum="{Binding Path=PowerMinValue, UpdateSourceTrigger=PropertyChanged}"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"                                                      
                                                       ToolTip="{Binding Path=Ssys_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                </Grid>
                            </GroupBox>
                            <GroupBox Header="Углы, косинусы, частота">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                        <ColumnDefinition Width="1*"></ColumnDefinition>
                                        <ColumnDefinition Width="1.25*"></ColumnDefinition>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition></RowDefinition>
                                        <RowDefinition></RowDefinition>
                                    </Grid.RowDefinitions>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="0"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="cos φ"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="A" FontSize="8"                                       
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=":"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="0" HorizontalAlignment="Left" 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          MaxLength="5"
                                          Text="{Binding Path=Cos_a, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}"                                     
                                          Width="60"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="1" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F2" Text="{Binding Path=Cos_a, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}" 
                                                       Increment="0.01"  Maximum="1.0" Minimum="-1.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Cos_a_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="0"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                           P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="cos φ"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="B" FontSize="8"                                       
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=":"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="3" Grid.Row="0" HorizontalAlignment="Left" 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          MaxLength="5"
                                          Text="{Binding Path=Cos_b, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}"                                     
                                          Width="60"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="3" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F2" Text="{Binding Path=Cos_b, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}" 
                                                       Increment="0.01"  Maximum="1.0" Minimum="-1.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Cos_b_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="4" Grid.Row="0"
                                           Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}">
                                        <TextBlock Text="cos φ"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="C" FontSize="8"                                       
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=":"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="5" Grid.Row="0" HorizontalAlignment="Left" 
                                          Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                          P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                          MaxLength="5"
                                          Text="{Binding Path=Cos_c, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}"                                     
                                          Width="60"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F2" Text="{Binding Path=Cos_c, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}" 
                                                       Increment="0.01"  Maximum="1.0" Minimum="-1.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Cos_c_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="6" Grid.Row="0">
                                        <TextBlock Text="cos φ"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="SYS" FontSize="8"                                       
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=":"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="7" Grid.Row="0" HorizontalAlignment="Left" 
                                      MaxLength="5"
                                      Text="{Binding Path=Cos_sys, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}"                                     
                                      Width="60"></TextBox>
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="7" Grid.Row="0"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F2" Text="{Binding Path=Cos_sys, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}" 
                                                       Increment="0.01"  Maximum="1.0" Minimum="-1.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       Visibility="{qc:Binding '$P>0?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=SelectedIndex, ElementName=MeasurementCircuitTypeComboBox}}"
                                                       ToolTip="{Binding Path=Cos_sys_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="0" Grid.Row="1"
                                               Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                               P={Binding Path=IsChecked, ElementName=ExtendedMode}}">
                                        <TextBlock Text="φ"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="AB" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" °:"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Left" 
                                     wpf:TextBoxMaskBehavior.Mask="Integer"                                  
                                     wpf:TextBoxMaskBehavior.MaximumValue="360"
                                     wpf:TextBoxMaskBehavior.MinimumValue="0"
                                     Text="{Binding Path=Phi_ab, UpdateSourceTrigger=PropertyChanged}"                                     
                                     Width="60"></TextBox>
                                    -->
                                    <xctk:IntegerUpDown Grid.Column="1" Grid.Row="1"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       Text="{Binding Path=Phi_ab, UpdateSourceTrigger=PropertyChanged}" 
                                                       Increment="1"  Maximum="360" Minimum="0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Integer"                                                      
                                                       ToolTip="{Binding Path=Phi_ab, UpdateSourceTrigger=PropertyChanged}"
                                                       Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=IsChecked, ElementName=ExtendedMode}}"/>
                                    <WrapPanel Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="2" Grid.Row="1"
                                               Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                               P={Binding Path=IsChecked, ElementName=ExtendedMode}}">
                                        <TextBlock Text="φ"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text="AC" FontSize="8"                                     
                                       VerticalAlignment="Bottom"></TextBlock>
                                        <TextBlock Text=" °:"
                                       TextAlignment="Right"
                                       VerticalAlignment="Bottom"></TextBlock>
                                    </WrapPanel>
                                    <!--
                                    <TextBox  Margin="0,10,0,0" TextAlignment="Center" Grid.Column="3" Grid.Row="1" HorizontalAlignment="Left" 
                                     wpf:TextBoxMaskBehavior.Mask="Integer"                                  
                                     wpf:TextBoxMaskBehavior.MaximumValue="360"
                                     wpf:TextBoxMaskBehavior.MinimumValue="0"
                                     Text="{Binding Path=Phi_ac, UpdateSourceTrigger=PropertyChanged}"                                     
                                     Width="60"></TextBox>
                                    -->
                                    <xctk:IntegerUpDown Grid.Column="3" Grid.Row="1"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       Text="{Binding Path=Phi_ac, UpdateSourceTrigger=PropertyChanged}" 
                                                       Increment="1"  Maximum="360" Minimum="0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Integer"                                                      
                                                       ToolTip="{Binding Path=Phi_ac, UpdateSourceTrigger=PropertyChanged}"
                                                       Visibility="{qc:Binding '$P?Visibility.Visible:Visibility.Collapsed', 
                                                       P={Binding Path=IsChecked, ElementName=ExtendedMode}}"/>
                                    <TextBlock Text="F (Гц):" Margin="0,10,10,0" HorizontalAlignment="Right" Grid.Column="4" Grid.Row="1"
                                       TextAlignment="Right"  
                                       VerticalAlignment="Center"></TextBlock>
                                    <!--
                                    <TextBox Margin="0,10,0,0" TextAlignment="Center" Grid.Column="5" Grid.Row="1" HorizontalAlignment="Left"                                    
                                     Text="{Binding Path=Frequency, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}" 
                                     MaxLength="5"
                                     Width="60"></TextBox>                                    
                                    -->
                                    <xctk:DoubleUpDown Grid.Column="5" Grid.Row="1"  Margin="0,10,0,0" TextAlignment="Center" HorizontalAlignment="Stretch"
                                                       FormatString="F2" Text="{Binding Path=Frequency, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.00}}" 
                                                       Increment="0.01"  Maximum="60.0" Minimum="40.0"
                                                       ClipValueToMinMax="True"
                                                       CultureInfo="En-Us" ParsingNumberStyle="Float"
                                                       ToolTip="{Binding Path=Frequency_quants, UpdateSourceTrigger=PropertyChanged}"/>
                                </Grid>
                            </GroupBox>
                        </StackPanel>
                    </TabItem>
                </TabControl>
            </StackPanel>
        </DockPanel>
    </DockPanel>
</Window>
